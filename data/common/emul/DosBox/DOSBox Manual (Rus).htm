<html>
<head>
	<meta encoding=dos>
	<title>Руководство по DOSBox v0.74 для КолибриОС </title>
  <style type="text/css">
    body {font-size:1.2em;margin:auto;display:table;}
    h1,h2,h3{margin-bottom:0;}
  </style>
</head>
<body><pre><h1>Руководство по DOSBox v0.74-3 для КолибриОС</h1>
<b>DOSBox</b> - эмулятор DOS-машины. С его помощью вы сможете запустить на 
современных компьютерах свои любимые старые игры времен DOS'а.

<font bg="#FFFBCE" style="background-color:#FFFBCE" 
> Самый простой способ запустить DOS игру или программу в           
 Колибри - это прописать ассоциацию в файловом менеджере:          
 чтобы exe и com открывались через /kolibrios/emul/dosbox/dosbox   
                                                                   
 Другой вариант - это используя Eolite нажать правой клавишей      
 мыши на программе и в выпавшем меню выбрать пункт                 
 "Открыть с помощью", далее нажать на DosBox в списке.              </font>

Это укороченная и адаптированная версия официального руководства, из нее 
вырезаны пункты не актуальные для Колибри. Например, отсутствует поддержка сети
и геймпадов.

<h2 id="contents">Содержание</h2>
<a href=#1>1. Начало</a>
<a href=#2>2. Эмулируемая аппаратура</a>
<a href=#3>3. Параметры командной строки</a>
<a href=#4>4. Внутренние программы</a>
<a href=#5>5. Специальные клавиши</a>
<a href=#6>6. Клавиатурная раскладка</a>
<a href=#7>7. Как ускорить/замедлить DOSBox</a>
<a href=#8>8. Решение проблем</a>
<a href=#9>9. Настроечный файл</a>

<h2 id="1">1. Начало:</h2>
Для получения краткого введения напечатайте INTRO в DOSBox.
Важно, чтобы вы освоили идею монтирования - DOSBox не делает автоматически 
никаких дисков доступными для эмуляции.

<b>НАЧАЛО: С чего начать?</b>
    В начале при запуске вы видите в командной строке Z:\> вместо C:\>.
    Вам нужно сделать ваши директории доступными как диски в DOSBox, используя   
    команду "mount" (монтирование). Например, "mount C /hd0/1/GAMES" даст вам
    диск C в DOSBox указывающий на вашу директорию /hd0/1/GAMES (предварительно
    созданную). 
    Чтобы перейти на диск, смонтированный, как указано выше, наберите "C:". 
    Если все прошло нормально, DOSBox отобразит строчку "C:\>".

<b>АВТОМАТИЗАЦИЯ: Я должен каждый раз писать эти команды монтирования?</b>
    В настроечном файле DOSBox есть секция [autoexec]. Команды, представленные 
    здесь, исполняются, когда запускается DOSBox, так что вы можете 
    использовать эту секцию для монтирования. См. раздел "Настроечный файл")

<b>CD-ROM: Игра/приложение не может найти CD-ROM.</b>
    Попробуйте создать образ CD-ROM (желательно пару CUE/BIN) и используйте 
    внутреннюю  утилиту DOSBox IMGMOUNT, чтобы смонтировать образ (файл CUE).
    Это обеспечит  очень хорошую низкоуровневую поддержку CD-ROM на любой 
    операционной системе. Монтирование может выглядеть следующим оброазом:
    C:>imgmount d "путь к директории\образ cd.iso" -t cdrom 
    C:>imgmount d "путь к директории\образ жесткого диска.img" -t hdd 
    C:>imgmount d "путь к директории\образ дискеты.img" -t floppy 

<b>МЫШЬ: Мышь не работает.</b>
    Обычно DOSBox определяет, когда игра использует мышиное управление. Если вы 
    кликните на экран, она закрепится (будет двигаться только в окне DosBox) и 
    будет работать. Иногда определение мыши DOSBox'ом не срабатывает в 
    определенных играх. В этом случае Вы должны вручную закрепить мышь, 
    используя ctrl-F10.

<b>ЗВУК: Нет звука.</b>
    Звук должен работать в DosBox Колибри.
    Убедитесь, что звук корректно настроен в игре. Это может быть сделано во 
    время  установки игры или с помощью программ  setup/setsound, поставляемых 
    с игрой. Вначале посмотрите, нет ли пункта autodetection (автоопределение). 
    Если такового нет, попробуйте выбрать Soundblaster или Soundblaster 16 с 
    настройками по умолчанию "address=220 irq=7 dma=1" (и иногда "highdma=5"). 
    Вы также можете  выбрать Sound Canvas/SCC/MPU-401/General MIDI/Wave Blaster 
    с параметрами "address=330 IRQ=2" в качестве музыкального устройства.
    Параметры эмулируемых звуковых карт могут быть изменены в настроечном 
    файле DosBox.
    Если звук не появился, поставьте core (ядро) на normal в настроечном файле 
    и используйте низкие значения cycles (инструкций), такие как cycles=2000. 
    Также убедитесь, что ваша реальная звуковая система способна выводить звук.
    В некоторых случаях может быть полезно использовать другое эмулируемое 
    устройство, например SoundBlaster Pro (sbtype=sbpro1 в настроечном файле 
    DOSBox) или Gravis Ultrasound (gus=true).

<b>ЗВУК: Какое звуковое железо эмулирует DOSBox?</b>
    DOSBox эмулирует несколько существующих звуковых устройств:
    - Внутренний динамик ПК/Зуммер
      Этот эмулятор включает и генератор тона и несколько форм цифрового               
      звукового вывода через внутренний динамик.
    - Creative CMS/Gameblaster
      Это первая карта, выпущенная Creative Labs(R). По умолчанию она 
      настраивается на адрес 220. По умолчанию отключен.
    - Tandy 3 voice
      Эмуляция этого звукового железа готова за исключением noise channel. 
      Noise channel не очень хорошо задокументирован и, по существу, есть только
      предположение как он должен работать. По умолчанию отключен.
    - Tandy DAC
      для некоторых игр может потребоваться отключения эмуляции SoundBlaster 
      (sbtype=none) для лучшей поддержки звука Tandy DAC. Не забудьте установить 
      sbtype обратно в sb16, если вы больше не используете звук Tandy.
    - Adlib
      Этот эмулятор почти безупречный и включает способность Adlib проигрывать 
      оцифрованный звук. Настраивается на адрес 220 (а также на 388).
    - SoundBlaster 16 / SoundBlaster Pro I & II / SoundBlaster I & II
      По-умолчанию DOSBox использует Soundblaster 16
      16-bit'ный стерео звук. Вы можете выбрать другую версию SoundBlaster
      в настроечном файле DOSBox. Музыка в AWE32 не эмулируется, т.к. вы можете
      использовать вместо неё MPU-401 (см. ниже).
    - Disney Soundsource
      Использует порт принтера. Это звуковое устройство выводит только цифровой 
      звук. Настраивается на LPT1.
    - Gravis Ultrasound
      Эмуляция устройства близка к завершению, хотя MIDI возможности были 
      исключены с тех пор, как MPU-401 эмулируется другим кодом. Для музыки 
      в Gravis  вы должны установить драйвера Gravis внутри DOSBox. 
      По умолчанию отключен.
    - MPU-401
      MIDI passthrough interface также эмулируется. Этот метод вывода звука 
      будет работать только при использовании с внешним устройством эмулятором.

<b>ЗВУК: Звук заикается или звуки растянутые/непонятные.</b>
    Вы используете слишком много ресурсов процессора, чтобы работать с текущей 
    скоростью. Вы можете сделать следующее: замедлить инструкции, пропускать 
    кадры, уменьшить  частоту дискретизации соответствующего звукового 
    устройства, увеличить предбуфер (prebuffer). 
    См. раздел "Настроечный файл".
    Если вы используете cycles=max или =auto, убедитесь что нет мешающих 
    фоновых процессов! (особенно если они обращаются к жесткому диску)
    Также обратитесь к разделу 10 "Как ускорить/замедлить DOSBox".

<b>КЛАВИАТУРА: Я не могу напечатать \ или : в DOSBox.</b>
    Это может произойти в различных ситуациях, например, если клавиатурная 
    раскладка вашего компьютера не имеет соответствующей DOS раскладки 
    (или была неверно определена), или файл переназначения клавиш неверен.
    Возможные решения проблемы:
      1. Используйте  / вместо \, или ALT-58 для : и ALT-92 для \.
      2. Измените раскладку клавиатуры DOS'а 
         (см. раздел "Клавиатурная раскладка").
      3. Добавьте команды, которые хотите выполнить в раздел [autoexec]
         настроечного файла DOSBox.
      4. Откройте настроечный файл DOSBox и измените параметр usescancodes.
      5. Переключите клавиатурную раскладку вашей операционной системы.
   
    Заметьте, что если раскладку вашего компьютера определить не удалось или 
    keyboardlayout установлен в none в настроечном файле DOSBox, используется 
    стандартная раскладка US. В этом случае попробуйте клавиши рядом с "enter" 
    для клавиши \ (обратная косая), а для клавиши : (двоеточие) используйте 
    shift и клавиши между "enter" и"L".
      
<b>КЛАВИАТУРА: Клавиатура тормозит.</b>
    Уменьшите настройки приоритета в настроечном файле DOSBox, например,
    выставив "priority=normal,normal". Вы можете также попробовать уменьшить 
    число инструкций. (Начните с фиксированного числа инструкций, 
    скажем cycles=10000).

<b>СКОРОСТЬ: Игра/приложение работает слишком медленно/слишком быстро!</b>
    Обратитесь к разделу "Как ускорить/замедлить DOSBox" за дальнейшими 
    сведениями.

<b>ВЫЛЕТ: Игра/приложение вообще не работает/вылетает!</b>
    См. раздел "Решение проблем"

<b>ИГРА: У моей игры на движке Build (Duke3D/Blood/Shadow Warrior) есть проблемы.</b>
    Прежде всего, попытайтесь найти версию игры портированную под вашу систему.
    Это даст вам большие возможности. Чтобы решить проблемы с графикой высокого 
    разрешения в DOSBox, откройте настроечный файл DOSBox и поищите в нем
    строчку machine=svga_s3. Замените svga_s3 на vesa_nolfb
    Замените memsize=16 на  memsize=63
 
<b>БЕЗОПАСНОСТЬ: Может DOSBox нанести ущерб моему компьютеру?</b>
    DOSBox не может причинить вред вашему компьютеру, больший, чем любые другие
    ресурсоемкие программы.  
    Увеличение cycles (числа инструкций) не разгоняет ваш реальный CPU.

<h2 id="2">2. Эмулируемая аппаратура</h2>
DOSBox эмулирует:
&bull; процессор до 386 (в режимах 286/386 realmode/protected mode)
&bull; файловую систему
&bull; образы CD-дисков (.iso и .cue/.bin)[1], жёстких дисков и дискет (.img)
&bull; XMS/EMS/UMB память
&bull; графику Tandy/Hercules/CGA/EGA/VGA/VESA (VESA - некоторые режимы SVGA)
&bull; внутренний PC-динамик (PC Speaker)
&bull; звуковые платы Creative CMS/Gameblaster, Tandy 3 voice, Tandy DAC, AdLib,
       Sound Blaster 16/Sound Blaster Pro 1&2/Sound Blaster 1&2, Covox/Disney 
       SoundSource, Gravis Ultrasound, MPU-401.

<h2 id="3">3. Параметры командной строки</h2>
Обзор параметров, которые вы можете задать для DOSBox. Хотя в большинстве 
случаев легче использовать вместо них настроечный файл DOSBox.
См. раздел "Настроечный файл"

Чтобы использовать ключи командной строки, запустите программу через /sys/run
с параметрами или можно создать ярлык для dosbox.

Опции доступны для всех операционных систем, если в их описании не сказано 
иначе:

dosbox [name] [-exit] [-c command] [-fullscreen] [-userconf]
       [-conf congfigfilelocation] [-lang languagefilelocation]
       [-machine machine type] [-noconsole] [-startmapper] [-noautoexec]
       [-securemode] [-scaler scaler | -forcescaler scaler] [-version]
       [-socket socket]
      
dosbox -version
dosbox -editconf program
dosbox -opencaptures program
dosbox -printconf
dosbox -eraseconf
dosbox -erasemapper

  <b>name</b>
        Если "name" директория она будет монтирована как диск C:.
        Если  "name" исполняемый файл, будет монтирована директория с "name" как 
        диск C: и этот файл будет запущен.
    
  <b>-exit</b>
        DOSBox закроется, когда DOS приложение "name" закончит работу.

  <b>-c command</b>
        Выполняет определенные команды до запуска "name". Может быть выполнено 
        несколько команд. Каждая команда должна начинаться с параметра "-c". 
        Команда может быть: внутренней программой, DOS командой или исполняемым 
        файлом на смонтированном диске.

  <b>-fullscreen</b>
        Стартует DOSBox в полноэкранном режиме.

  <b>-userconf</b>
        Запускает DOSBox с настроечный файлом из профиля пользователя. Может 
        использоваться совместно с множественными параметрами -conf parameters, 
        но -userconf всегда загружается перед ними.

  <b>-conf configfilelocation</b>
        Запускает DOSBox с опциями, назначенными в файле настройки 
        "configfilelocation". Может быть несколько -conf опций.
        Смотрите раздел для подробностей.

  <b>-machine machinetype</b>
        Задает DOSBox эмулировать конкретный тип машины. Доступны для выбора:
        hercules, cga, ega, pcjr, tandy, svga_s3 (по-умолчанию), а также 
        дополнительные svga карты, перечисленные в комментариях к настроечному 
        файлу DOSBox.
        svga_s3 также включает эмуляцию vesa.
        Для некоторых видеоэффектов VGA можно указать  тип vgaonly, помните,
        что это отключит возможности svga и может быть заметно медленнее из-за
        большей точности эмуляции.
        Тип машины влияет на видеокарту и доступные звуковые карты.

  <b>-startmapper</b>
        Войти в режим назначения клавиш непосредственно при старте. Полезно для 
        тех, у кого проблемы с клавиатурой.

  <b>-noautoexec</b>
        Пропустить секцию [autoexec] загруженного настроечного файла.

  <b>-securemode</b>
        Тоже что и -noautoexec, но добавляеит "config.com -securemode" в конец
        AUTOEXEC.BAT (который, в свою очередь, запрещает любые изменения
        в монтируемых дисках внутри DOSBox).

  <b>-scaler scaler</b>
        Использует метод масштабирования (scaler) определенный параметром 
        "scaler".
        Смотрите настроечный файл DOSBox для списка доступных методов 
        масштабирования.

  <b>-forcescaler scaler</b>
        Подобен параметру -scaler, но пытается принудительно применить указанный
        метод масштабирования, даже если он может не подойти (по размеру окна).

  <b>-version</b>
        Вывести информацию о версии и выйти. Полезно для оболочек.

  <b>-editconf program</b>
        Вызывает программу, передав ей настроечный файл в качестве первого
        параметра. Вы можете задать эту команду несколько раз. В этом случае 
        вторая программа будет вызвана, если первая не запустится.

  <b>-opencaptures program</b>
        Вызывает программу, передав ей путь к папке скриншотов в качестве 
        первого параметра.
  
  <b>-printconf</b>
        Выводит расположение настроечного файла по умолчанию.

  <b>-eraseconf</b>
  <b>-resetconf</b>
        Удаляет настроечный файл по умолчанию.

  <b>-erasemapper</b>
  <b>-resetmapper</b>
        Удаляет файл переназначения клавиш, используемый конфигурацией 
        по-умолчанию.


Замечание: Если имя/команда/настроечный файл/языковой файл содержит пробелы 
      внутри, пишите все имя/команда/настроечный файл/языковой файл в кавычках
      ("команда или имя файла"). Если вам необходимо использовать кавычки внутри 
      кавычек (обычно в параметре -c и монтировании):
      Пользователи Windows и OS/2 могут писать одинарные кавычки внутри двойных. 
      Остальные - комбинацию со слешем (\) внутри двойных кавычек.
      Windows: -c "mount c 'c:\program files\'" 
      Linux: -c "mount c \"/tmp/name with space\""


Достаточно необычный пример, просто для демонстрации (Windows):
dosbox D:\folder\file.exe -c "MOUNT Y H:\MyFolder"
  Будет смонтирована D:\folder как C:\ и запущен file.exe.
  Но до этого будет смонтирована H:\MyFolder как диск Y.


<h2 id="4">4. Внутренние программы</h2>
DOSBox поддерживает большинство команд DOS имеющихся в command.com. 
Для получения списка внутренних команд напишите "HELP" в командной строке.

Также в дополнение, доступны следующие команды: 

<b>MOUNT</b> "Буква эмулируемого диска" "Реальный диск или директория" 
      [-t type] [-ioctl] [-noioctl] [-usecd number] [-size drivesize] 
      [-label drivelabel] [-freesize size_in_mb]
      [-freesize size_in_kb (floppies)]
MOUNT -cd
MOUNT -u "Буква эмулируемого диска"

  Программа для монтирования локальных директорий как дисков внутри DOSBox.

  "Буква эмулируемого диска"
        Буква диска внутри dosbox (например, C).

  "Реальный диск (буква, используется обычно для CD-ROM в Windows) или директория"
        Локальная директория, которую вы хотите видеть внутри dosbox.

  -t type
        Тип монтируемой директории. 
        Поддерживаются: dir (по-умолчанию), floppy, cdrom.

  -size drivesize
        (только для опытных пользователей)
        Устанавливает размер диска, где размер диска задается по форме
        "bps,spc,tcl,fcl":
           bps: байт в секторе, по-умолчанию 512 для постоянных дисков и
                2048 для CD-ROM дисков
           spc: секторов в кластере, обычно между 1 и 127
           tcl: всего кластеров, между 1 и 65534
           fcl: всего свободно кластеров, между 1 и tcl

  -freesize size_in_mb | size_in_kb
        Устанавливает величину свободного места доступного на диске в мегабайтах
        (постоянные диски) или килобайтах (дискеты).
        Это упрощенная версия -size.	

  -label drivelabel
        Устанавливает имя диска как "drivelabel". Необходимо некоторым системам, 
        если имя диска не читается корректно (полезно, когда программа не может 
        найти свой CD-ROM). Если не указано имя и не включена поддержка на 
        низком уровне (не указаны -usecd # и/или -aspi параметры или указано 
        -noioctl):
        Для Windows: имя берется с "реального диска". 
        Для Linux: Имя ставиться как NO_LABEL.

        Если вы укажете имя, это имя будет сохраняться, пока диск смонтирован. 
        Оно не будет обновляться!!

  -ioctl (автоматический выбор интерфейса CD-аудио)
  -ioctl_dx (используется цифровое извлечение аудио для CD-аудио)
  -ioctl_dio (используется ioctl для CD-аудио)
  -ioctl_mci (используется MCI для CD-аудио)
        Указывает использовать ioctl команды. Доступно только если монтируется 
        CD-ROM под Windows, который поддерживает их (Win2000/XP/NT).
        Варианты различаются только способом работы с CD-аудио,
        предпочтительно использовать -ioctl_dio (наименьшая загрузка процессора), 
        но это может работать не на всех системах, тогда следует использовать
		-ioctl_dx (или -ioctl_mci).
        
  -noioctl   
        Указывает использовать  SDL CD-ROM layer. Работает на всех системах.

  -usecd number
        Указывает использовать SDL поддержку CD-ROM для диска с номером.
        Номер может быть получен с параметром -cd. Доступно на всех системах.

        Доступно на всех системах, под Windows нужно указать параметр -noioctl
        чтобы задействовать  -usecd.
        Позволяет указать диск, который будет использоваться SDL. Используйте,
        если при использовании SDL интерфейса монтируется неверный CD-ROM диск 
	    (или вообще не монтируется). 
        Номер может быть получен командой "MOUNT -cd".

  -cd
        Отображает все CD-ROM диски, обнаруженные SDL, и их номера.
        См. выше описание параметра  -usecd.

  -u
        Удаляет смонтированный диск. Не работает для Z:\.

  Замечание: Возможно смонтировать локальную директорию, как cdrom, но 
             аппаратная поддержка в этом случае отсутствует.


  Собственно MOUNT позволяет вам соединить реальную аппаратную часть с 
  DOSBox'овой эмуляцией PC. Так MOUNT C C:\GAMES говорит DOSBox использовать 
  директорию C:\GAMES  как диск C: в DOSBox. MOUNT C E:\SomeFolde говорит 
  DOSBox использовать  директорию E:\SomeFolder как диск C: in DOSBox.

  Монтирование всего диска C командой MOUNT C C:\ НЕ рекомендуется! То же 
  относится и к другим  дискам, кроме CD-ROM (так как это устройства 
  "только для чтения").
  В противном случае  при возникновении ошибки в DOSBox, вы можете потерять 
  все ваши файлы. Также никогда не монтируйте папки "Windows" или 
  "Program Files" (и их подпапки) в системах Windows Vista/7, так как DOSBox 
  в таком случае может работать некорректно  (или прекратить корректную работу 
  в дальнейшем). Рекомендуется положить все ваши  приложения/игры в простую 
  папку (например, c:\dosgames)  и монтировать ее.

  Вы должны всегда устанавливать ваши игры внутри DOSBox.
  И, если ваша игра расположена на CD, вы должны (после установки!) смонтировать 
  папку как жёсткий диск и как устройство как CD-ROM.
  Жёсткий диск всегда должен монтироваться как c
  CD-ROM всегда должен монтироваться как d
  Дисковод (для гибких дисков) всегда должен монтироваться как a (или b)

  Простые примеры команды MOUNT (Windows):

   1. Чтобы смонтировать папку как жёсткий диск:
          mount c d:\dosgames

   2. Чтобы смонтировать устройство CD-ROM  E как устройство CD-ROM  D в DOSBox:
          mount d e:\ -t cdrom

   3. Чтобы смонтировать устройство a: как дискету:
          mount a a:\ -t floppy

  Расширенные примеры команды (Windows):

   4. Чтобы смонтировать жёсткий диск с ~870 Мб свободного места (простая версия):
          mount c d:\dosgames -freesize 870

   5. Чтобы смонтировать устройство с ~870 Мб свободного места (полное управление):
          mount c d:\dosgames -size 512,127,16513,13500

   6. Чтобы смонтировать c:\dosgames\floppy как дискету:
          mount a c:\dosgames\floppy -t floppy


  Прочие примеры команды MOUNT:

   7. Чтобы смонтировать устройство CD-ROM  /media/cdrom как устройство 
      CD-ROM D в DOSBox:
          mount d /media/cdrom -t cdrom -usecd 0

   8. Чтобы смонтировать /home/user/dosgames как диск C в DOSBox:
          mount c /home/user/dosgames

   9. Чтобы смонтировать директорию, из которой был запущен  DOSBox 
      как диск C в DOSBox:
          mount c .
          (Обратите внимание на ".", что означает директорию в которой был 
          запущен DOSBox, не используйте её на Windows Vista/7, если вы 
          установили  DOSBox в папку "Program Files")

  Если вы хотите смонтировать образ CD или дискеты, смотрите описание команды 
  IMGMOUNT.
  MOUNT также может работать с образами, но для этого требуется использование 
  сторонних  программ, например (обе бесплатны):
  - Daemon Tools Lite (для образов CD),
  - Virtual Floppy Drive (для образов дискет).
  Хотя  IMGMOUNT может дать большую совместимость.


<b>MEM</b>
  Программа для отображения величины свободной памяти.


<b>VER</b> set major_version [minor_version]
  Отображает текущую версию DOSBox и сообщаемую программам версию DOS 
  (при вызове без параметров).
  Вы можете изменить сообщаемую версию  DOS при помощи параметра "set",
  например "VER set 6 22" заставит DOSBox сообщать версию DOS 6.22.


<b>CONFIG</b> -writeconf filelocation
CONFIG -writelang filelocation
CONFIG -securemode
CONFIG -set "секция свойство=значение"
CONFIG -get "секция свойство"

  CONFIG может быть использован, чтобы менять или узнавать различные настроки 
  для  DOSBox во время работы. Она может сохранить текущие настройки и языковые 
  строки на  диск. Информация обо всех возможных секциях и свойствах может быть 
  найдена в разделе "Настроечный файл".

  -writeconf filelocation
       Записать текущие конфигурационные настройки в файл в указанном месте. 
       "filelocation" располагается на реальном диске, а не на смонтированном
       диске в DOSBox. 
       Настроечный файл управляет различными настройками DOSBox: 
       Размер эмулируемой памяти, эмулируемые звуковые карты и другие вещи.
       Он позволяет получить доступ к AUTOEXEC.BAT.
       См. раздел "Настроечный файл".

  -securemode
       Переключает DOSBox в "защищённый" режим. В этом режиме внутренние команды 
       MOUNT, IMGMOUNT и BOOT не работают. Также в этом режиме нельзя создать 
       новый настроечный файл или языковой.
       (Предупреждение: отменить этот режим можно только перезапустив DOSBox.)

  -set "секция свойство=значение"
       CONFIG попытается установить свойству новое значение. На данный момент
       CONFIG может не сообщать, выполнилась ли команда успешно или нет.

  -get "секция свойство"
       Текущее значение свойства выводится и сохраняется в переменной окружения 
       %CONFIG%. Она может быть использована при работе с пакетными 
       файлами (bat).

  И "-set" и "-get" работают из пакетных файлов и могут быть использованы для
  установки своих собственных настроек для каждой игры. Хотя может оказаться 
  проще использовать раздельные настроечные файлы для каждой игры.
  
  Примеры:
  1. Для создания настроечного файла в директории c:\dosgames:
      config -writeconf c:\dosgames\dosbox.conf
  2. Для установки числа инструкций CPU на 10000:
      config -set "cpu cycles=10000"
  3. Для отключения эмуляции ems памяти:
      config -set "dos ems=off"
  4. Для проверки, какое ядро cpu используется.
      config -get "cpu core"


<b>LOADFIX</b> [-size] [program] [program-parameters]
LOADFIX -f
  Программа для сокращения количества доступной обычной памяти. Полезна для 
  старых программ, которые не понимают большое количество свободной памяти. 

  -size	        
        Число килобайт, которые будут "съедены", по-умолчанию = 64kb
  
  -f
        Освободить всю предыдущую сокращенную память
  

Примеры:
  1. Чтобы запустить mm2.exe и сократить 64kb памяти 
     (mm2 будет доступно на 64 kb меньше):
     loadfix mm2
  2. Чтобы запустить mm2.exe и сократить 32kb памяти:
     loadfix -32 mm2
  3. Чтобы удалить все предыдущие сокращения:
     loadfix -f


<b>RESCAN</b>
  Заставляет DOSBox перепроверить структуру директории. Полезно, если вы что-то 
  изменили на смонтированном диске вне DOSBox. (CTRL - F4 также сделает это!)
  

<b>MIXER</b>
  Отображает текущие настройки громкости. 
  Таким образом вы можете их изменять:
  
  mixer channel left:right [/NOSHOW]
  
  channel
      Может быть одним из следующих: MASTER, DISNEY, SPKR, GUS, SB, FM [, CDAUDIO].
      CDAUDIO доступно, только если задействован интерфейс CD-ROM с поддержкой
      управления громкостью (образ CD-диска, ioctl_dx).
  
  left:right
      Уровень громкости в процентах. Если вы напишите D перед этим, он будет в 
      децибелах (Пример, mixer gus d-10).
  
  /NOSHOW
      DOSBox не будет показывать результат, если вы установите один из уровней 
      громкости.

  /LISTMIDI
      В Windows показывает список доступных midi устройств на вашем PC. Для 
      выбора устройства отличного от установленного по-умолчанию Windows 
      midi-mapper, измените строку 'midiconfig=' в секции [midi] в настроечном 
      файле на 'midiconfig=id' , где 'id'- номер устройства, полученный по 
      списку LISTMIDI.
      Например, midiconfig=2

      В Linux этот параметр не работает, но вы можете добиться аналогичных 
      результатов, введя в консоли 'pmidi -l'. Затем измените строку 
      'midiconfig=' на 'midiconfig=port', где 'port' - порт устройства, 
      указанный в результатах 'pmidi -l',
      например, midiconfig=128:0

 
  
<b>IMGMOUNT</b>
  Утилита для монтирования образа диска и образа CD-ROM в DOSBox.
  
  IMGMOUNT DRIVE [imagefile] -t [image_type] -fs [image_format]
            -size [sectorsbytesize, sectorsperhead, heads, cylinders]
  IMGMOUNT DRIVE [imagefile1 imagefile2 .. imagefileN] -t cdrom -fs iso

  imagefile
      Расположение файла образа для монтирования в DOSBox. Может быть на 
      смонтированном диске внутри DOSBox или реальном диске. Можно 
      также монтировать образы дисков CD-ROM (ISO или CUE/BIN или CUE/IMG). 
      Если хотите  иметь возможность переключать CD, укажите все образы в виде 
      последовательности (см. следующий пункт).
      Предпочтительным типом образов дисков CD-ROM является пара CUE/BIN или 
      CUE/IMG, так как она может содержать аудио дорожки в отличие от образов
      ISO (которые содержат только данные). Для монтирования пары
      CUE/BIN всегда указывайте файл CUE.
      
  imagefile1, .. ,imagefileN
      Расположение файлов образа для монтирования в DOSBox. Указывать несколько
      файлов образов можно только для образов дисков CD-ROM. CD могут быть 
      переключены в любое время сочетанием CTRL-F4. Это требуется для
      игр на нескольких дисках требующих смены диска во время игры.


CD-ROM образы могут быть смонтированы 
      напрямую. Они не обязательно должны быть на смонтированном диске.
   
  -t 
      Следующие типы являются допустимыми:
        floppy: Указание на образ дискеты.  DOSBox 
                автоматически определит геометрию диска 
                ( 360K, 1.2MB, 720K, 1.44MB, и т.д.).
        iso:    Указание на ISO образ диска CD-ROM.  Геометрия определится 
                автоматически. Это может быть iso или cue/bin или cue/img.
        hdd:    Указание на образ жесткого диска. Для этого должна быть 
                установлена точная CHS геометрия.

  -fs 
     Следующие форматы файловой системы допустимы:
        iso:  Указывает на ISO 9660 CD-ROM формат.
        fat:  Указывает на то, что диск использует файловую систему FAT. DOSBox 
              попытается смонтировать этот образ как диск в DOSBox и сделать 
              файлы доступными внутри DOSBox.
        none: DOSBox не будет пытаться прочитать файловую систему на диске. Это 
              полезно если его необходимо отформатировать или загрузить диск, 
              используя BOOT команду.
              При использовании "none" файловой системы лучше указать номер 
              диска (2 или 3, где 2 = master, 3 = slave) чем букву диска. 
              Для примера, чтобы смонтировать образ в 70MB как slave диск, 
              необходимо набрать (без кавычек):
                "imgmount 3 d:\test.img -size 512,63,16,142 -fs none" 
                Сравните это с монтированием для чтения диска 
                внутри DOSBox, что будет выглядеть как: 
                "imgmount e: d:\test.img -size 512,63,16,142"

  -size 
     Цилиндры, головки и сектора диска.
     Необходимы для монтирования образов жестких дисков.
     
  Пример, как монтировать образы CD-ROM (в Linux):
    1. imgmount d /tmp/cdimage1.cue /tmp/cdimage2.cue -t cdrom
  или (что тоже работает):
    2a. mount c /tmp
    2b. imgmount d c:\cdimage1.cue c:\cdimage2.cue -t cdrom
  (in Windows):
    imgmount d f:\img\CD1.cue f:\img\CD2.cue f:\img\CD3.cue -t cdrom
    imgmount d "g:\img\7th Guest CD1.cue" "g:\img\7th Guest CD2.cue" -t cdrom

  Не забывайте, что вы можете также монтировать образы командой MOUNT, но с 
  использованием сторонних программ, например (обе бесплатны):
  - Daemon Tools Lite (для образов CD),
  - Virtual Floppy Drive (для образов дискет).
  Хотя IMGMOUNT может дать большую совместимость.


<b>BOOT</b>
  Boot запустит floppy образы или образы жесткого диска независимо от эмуляции 
  операционной системы предложенной DOSBox.  Это позволит вам запускать 
  загрузочные дискеты или загружать другие операционные системы в DOSBox.
  Если эмулируемая система PCjr (machine=pcjr), загрузочная команда может быть
  использована для загрузки картриджей PCjr (.jrc). 

  BOOT [diskimg1.img diskimg2.img .. diskimgN.img] [-l driveletter]
  BOOT [cart.jrc]  (только PCjr)

  diskimg1.img diskimg2.img .. diskimgN.img
     Может быть любое число floppy образов, которое хотите смонтировать  
     после того, как DOSBox загрузит заданную букву диска. Чтобы переключаться 
     между образами нажимайте CTRL+F4. Нажатие заменит текущий диск следующим 
     в списке. Когда будет сменен последний диск, список начнет прокручиваться 
     сначала.

  [-l driveletter]
     Этот параметр позволяет определить диск, с которого необходимо грузится. 
     По-умолчанию это диск A, floppy диск. Можно также  загрузится с образа 
     жесткого диска смонтированного как мастер указанием "-l C" без кавычек, 
     или как slave  указанием "-l D"

  cart.jrc (только PCjr)
     Когда включена эмуляция PCjr, можно загружать картриджи командой BOOT. 
     Поддержка пока ограничена.


<b>KEYB</b> [keyboardlayoutcode [codepage [codepagefile]]]
  Изменить раскладку клавиатуры. Для подробной информации о раскладках 
  клавиатуры смотрите раздел "Клавиатурная раскладка".

  [keyboardlayoutcode] это строка, состоящая из пяти или менее символов, 
     например, PL214 (Польская пишущая машинка) или 
     PL457 (Польская, программирование).
     Она указывает, какая раскладка будет использована.
     Список встроенных в DOSBox раскладок приведён в  
     <a href="http://vogons.zetafleet.com/viewtopic.php?t=21824">http://vogons.zetafleet.com/viewtopic.php?t=21824</a>

  [codepage] это число указывает на кодовую страницу (codepage), которая 
     будет использована. 
     Клавиатурная раскладка должна обеспечивать поддержку указанной кодовой 
     страницы, иначе загрузка раскладки не выполнится.
     Если не указана кодовая страница, подходящая страница для запрашиваемой 
     раскладки будет выбрана автоматически.

  [codepagefile] файл, который может быть использован для загрузки кодовых 
     страниц, не встроенных в DOSBox. Нужен только если DOSBox не находит 
     кодовую страницу. Если файл кодовой страницы не указан, но вы поместите 
     все десять файлов ega.cpx (взятые из FreeDOS) в папку программы DOSBox, 
     подходящий файл кодовой страницы для пары 
     keyboardlayoutcode/codepage будет загружен автоматически.

  Примеры:
  1. Чтобы загрузить польскую машинописную раскладку (автоматически использует 
     кодовую страницу 852):
       keyb pl214
  2. Чтобы загрузить одну из русских раскладок с кодовой страницей 866:
       keyb ru441 866
     Чтобы печатать русские символы нажмите ALT+RIGHT-SHIFT.
  3. Чтобы загрузить одну из французских раскладок с кодовой страницей 850 
     (где кодовая  страница определена в файле EGACPI.DAT):
       keyb fr189 850 EGACPI.DAT
  4. Чтобы загрузить кодовую страницу 858 (без клавиатурной раскладкой):
       keyb none 858
     Может быть использовано, чтобы изменить кодовую страницу 
     для утилиты FreeDOS keyb2.
 5. Чтобы вывести текущую кодовую страницу и, если загружена, клавиатурную 
    раскладку:
       keyb

Для большей информации используйте /? параметр командной строки с программами.

<h2 id="5">5. Специальные клавиши</h2>
<font bg=#e4ffcb>ALT-PAUSE   </font>  Приостановить эмуляцию (для продолжения работы еще раз 
              нажмите ALT-PAUSE).
<font bg=#e4ffcb>CTRL-F1     </font>  Запустить настройщик клавиш.
<font bg=#e4ffcb>CTRL-F4     </font>  Сменить смонтированный образ диска (CD или дискеты). Обновить кэш 
              директории для всех дисков
<font bg=#e4ffcb>CTRL-F7     </font>  Уменьшить пропуск кадров.
<font bg=#e4ffcb>CTRL-F8     </font>  Увеличить пропуск кадров.
<font bg=#e4ffcb>CTRL-F9     </font>  Закрыть DOSBox.
<font bg=#e4ffcb>CTRL-F10    </font>  Захватить/Отпустить мышь.
<font bg=#e4ffcb>CTRL-F11    </font>  Замедлить эмуляцию (уменьшить число инструкций DOSBox).
<font bg=#e4ffcb>CTRL-F12    </font>  Ускорить эмуляцию (увеличить число инструкций DOSBox)*.
<font bg=#e4ffcb>ALT-F12     </font>  Убрать ограничение скорости (турбо кнопка/ускорение)**.
<font bg=#e4ffcb>F11, ALT-F11</font>  (machine=cga) смена оттенка в режимах вывода NTSC***
<font bg=#e4ffcb>F11         </font>  (machine=hercules) переключения цвета межу янтарным, зелёным и 
              белым***

*Замечание: Если вы увеличите число инструкций DOSBox больше максимальной 
            производительности вашего компьютера, это произведет эффект 
            аналогичный замедлению эмуляции. Этот максимум варьируется от 
            компьютера к компьютеру.

**Замечание: Вам понадобятся свободные ресурсы процессора (и чем больше, 
             тем лучше, т.е. быстрее). Поэтому при установке cycles=max или 
             очень большом фиксированном числе инструкций, турбо может 
             не сработать. И клавишу нужно удерживать!

***Замечание: Эти клавиши не сработают, если вы сохранили файл переназначения 
              клавиш с другим типом машины. Придётся или переназначить их или 
              сбросить переназначение в начальное состояние (-resetmapper).

Переключение на полный экран и обратно, запись роликов и звуков, создание 
скриншотов не поддерживается в Колибри. 

Это клавиши по-умолчанию. Вы можете поменять их в настройщике клавиатуры. 

<h2 id="6">6. Клавиатурная раскладка</h2>
В Колибри по-умолчанию используется расладка DOS CP-866.

Для переключения на другую клавиатурную раскладку может быть использован пункт
"keyboardlayout" в секции [dos] настроечного файла DOSBox или внутренняя 
программа DOSBox keyb.com (см. раздел "Внутренние программы"). Оба метода 
принимают языковые коды определенные в DOS (смотрите ниже),
но только при использовании keyb.com можно указывать кодовую страницу.

DOSBox поддерживает некоторое количество клавиатурных раскладок по-умолчанию,
для переключения на них нужно задать идентификатор раскладки (например,
keyboardlayout=PL214 в настроечном файле DOSBox, или напечатать "keyb PL214" 
в командной строке). Перечень всех встроенных в DOSBox раскладок приведён в:
<a href="http://vogons.zetafleet.com/viewtopic.php?t=21824">http://vogons.zetafleet.com/viewtopic.php?t=21824</a>
  
Некоторые клавиатурные раскладки (для примера GK319 codepage 869 и RU441
codepage 808) поддерживают спаренные раскладки, которые можно переключать 
нажатием LeftALT+RightSHIFT для включения одной раскладки и LeftALT+LeftSHIFT 
для второй. Некоторые раскладки (например, LT456 с кодовой страницей 771) 
имеют поддержу трёх раскладок, третью можно включить нажатием  
LeftALT+LeftCTRL.

Обратите внимание, что клавиатурные раскладки позволяют вводить символы других 
языков, но поддержки их в именах файлов НЕТ. Постарайтесь обойти их 
использование внутри названий файлов DOSBox и названий файлов вашей 
операционной системы, которые должны быть доступны в DOSBox.

Для переназначения клавиш см. полное руководоство.

<h2 id="7">7. Как ускорить/замедлить DOSBox</h2>
DOSBox эмулирует CPU, звуковую и графическую карты, и другие устройства PC в 
одно и тоже время. Скорость эмулируемых приложений DOS зависит от того, сколько 
инструкций может быть сэмулировано, что является настраиваемым параметром 
(число инструкций).

Инструкции (циклы) CPU  (ускорение/замедление)
  По-умолчанию (cycles=auto) DOSBox пытается определить, нужно ли запускать игру
  с максимально возможным количеством эмулируемых инструкций (cycles=max, иногда
  это приводит к слишком быстрой или нестабильной работе игры) или же 
  использовать фиксированое число инструкций (cycles=max, иногда это приводит к 
  слишком медленной или слишком быстрой работе игры). Но вы всегда можете 
  указать другое значение в настроечном файле DOSBox.

  Вы можете заставить DOSBox работать медленнее или быстрее, указав 
  фиксированное значение инструкций в настроечном файле. Если, к примеру, 
  указать cycles=10000, то в заголовке окна DOSBox будет отображено 
  "Cpu Speed: fixed 10000 cycles". В этом режиме вы можете дополнительно 
  уменьшить число инструкций, нажимая CTRL-F11 (можете уменьшать,сколько хотите) 
  или увеличить, нажимая CTRL-F12, при этом вы ограничены только 
  производительностью одного ядра процессора в вашем компьютере.
  Когда достигнута 100% загрузка одного из ядер процессора, невозможно далее 
  ускорять работу DOSBox (она будет только замедляться), если только не 
  уменьшить нагрузку создаваемую другими (не эмуляцией процессора) частями 
  DOSBox. DOSBox может использовать только одно ядро вашего процессора, 
  так что если у вас четырехъядерный процессор, DOSBox не сможет задействовать 
  ресурсы остальных трёх.
  
  Вы также можете заставить DOSBox работать быстро, указав cycles=max в 
  настроечном файле. В заголовке окна DOSBox появится надпись 
  "Cpu Speed: max 100% cycles". Теперь вы не должны отслеживать сколько 
  свободных ресурсов есть у вашего процессора, так как DOSBox всегда будет 
  использовать 100% ресурсов одного из ядер. В этом режиме вы  можете уменьшить 
  объём загрузки ядра процессора, нажав CTRL-F11, или увеличить, нажав CTRL-F12.

Ядра CPU (ускорение)
  В x86 архитектурах вы можете попробовать установить использование динамически 
  перекомпилируемого ядра (поставьте core=dynamic в настроечном файле DOSBox).
  Это обычно дает лучшие результаты, если автоопределение  (core=auto) не 
  срабатывает.
  Этот тип лучше всего сопровождать cycles=max. Но вы также можете попробовать
  указать высокое значение числа инструкций (к примеру, 20000 и больше).
  Обратите внимание, что могут быть игры,  которые хуже работают (или слетают)
  с динамическим ядром (поэтому чаще сохраняйте игру), или не работают 
  с ним совсем!

Эмуляция графики
  VGA эмуляция самая требовательная часть DOSBox с точки зрения загрузки CPU. 
  увеличьте число пропускаемых кадров (увеличивая по одному) нажатием CRTL+F8. 
  Загрузка вашего CPU должна уменьшиться, если выставлен режим фиксированного 
  числа инструкций и вы сможете увеличить число инструкций, нажимая CTRL-F12.
  Повторяйте это, пока игра не  заработает с приемлемой скоростью. 
  Пожалуйста, помните, что это компромисс: вы теряете в плавности картинки, 
  но получаете скорость. 

Эмуляция звука
  Вы можете также попробовать отключить звук через setup игры, чтобы еще 
  уменьшить нагрузку на ваш CPU. Установка nosound=true в настроечном файле 
  НЕ отключает эмуляцию звуковых устройств, будет отключен только вывод звука.

Также попробуйте закрыть все программы кроме DOSBox, чтобы высвободить как 
можно больше ресурсов для DOSBox.


Гибкая настройка числа инструкций:
Настройки cycles=auto и cycles=max могут быть параметризованы, чтобы иметь 
различные значения при старте.
Синтаксис:
  cycles=auto ["по-молчанию для realmode"] ["по-умолчанию для protected mode"%] 
              [limit "лимит инструкций"]
  cycles=max ["по-молчанию для protected mode"%] [limit "лимит инструкций"]
Пример:
  cycles=auto 5000 80% limit 20000
  будут использованы cycles=5000 для real mode игр, пониженные до 80% CPU для 
  protected mode игр с лимитом числа инструкций 20000

<h2 id="8">8. Решение проблем</h2>
Запуск определенных игр приводит к закрытию DOSBox, вылету с неким сообщением 
или зависанию:
  - проверьте с начальной установкой DOSBox
    (немодифицированным настроечным файлом)
  - попробуйте с отключенным звуком (используйте настроечную программу, которая 
    идет с игрой, в дополнение вы можете выставить sbtype=none и gus=false в 
    настроечном файле DOSBox)
  - поменяйте некоторые записи в настроечном файле DOSBox, главным образом 
    попробуйте:
      core=normal
      фиксированное число инструкций (для примера cycles=10000)
      ems=false
      xms=false
    или комбинации приведенных настроек,
    а также установку параметра machine, указывающего эмулируемую видеокарту и 
    функциональность:
      machine=vesa_nolfb
    или
      machine=vgaonly
  - используйте loadfix перед запуском игры

Игра вылетает в командную строку DOSBox с некоторым сообщением об ошибке:
  - прочтите сообщение об ошибке и попробуйте опознать ошибку
  - попробуйте решения из секций выше
  - монтируйте различные пути, если игра требовательна к местоположению,
    например,  если вы используете "mount d d:\oldgames\game" попробуйте
    "mount c d:\oldgames\game" и "mount c d:\oldgames"
  - если игра требует использование CD-ROM, убедитесь, что вы используете 
    "-t cdrom", когда монтируете, и попробуйте различные дополнительные 
    параметры (ioctl, usecd и label, смотрите соответствующий раздел)
  - проверьте права на файлы игры (уберите атрибуты "только чтение", добавьте 
    права на запись и т.д.)
  - попробуйте переустановить игру внутри DOSBox

<h2 id="9">9. Настроечный файл</h2>
Настроечный файл DOSBox имеет имя dosbox-0.74-3.conf и должен располагаться
в папке $HOME/.dosbox (по умолчанию $HOME это /tmp0/1,
однако вы можете изменить это в файле /sys/settings/system.env).

Этот файл разделён на несколько секций. Каждая секция начинается со строки
[имя секции]. Установки представляют из себя строки вида "свойство=значение", 
где "значение" можно изменять для настройки DOSBox.
Символы # и % отмечают (начинают) строки-комментарии.

Дополнительный настроечный файл может быть сгенерирован программой CONFIG.COM, 
расположенной на внутреннем диске DOSBox Z: Смотри раздел 
"Внутренние программы" для поиска сведений по использованию CONFIG.COM. 
Вы может запустить  DOSBox с параметром -conf для загрузки сгенерированного 
файла и использования его установок.

DOSBox загрузит файлы, указанные с параметром -conf. Если не указан ни один,
DOSBox попытается загрузить файл "dosbox.conf" в текущей директории.

Также смотрите:
<a href="http://www.old-games.ru/utils/dosbox/">Раздел с DOSBox на Old-Games.RU</a>
<a href="http://www.dosbox.com/wiki/">Wiki-энциклопедии DOSBox</a>

</pre></body></html>
